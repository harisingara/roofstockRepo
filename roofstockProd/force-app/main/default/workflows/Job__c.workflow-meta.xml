<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <fieldUpdates>
        <fullName>Job_Update_Status_to_Complete</fullName>
        <field>Job_Status__c</field>
        <literalValue>Job Completed</literalValue>
        <name>Job - Update Status_to_Complete</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Set_Actual_Job_End_Date</fullName>
        <field>Actual_Job_End_Date__c</field>
        <formula>TODAY()</formula>
        <name>Set Actual Job End Date</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Set_Job_Status_to_Need_Job_Start</fullName>
        <field>Job_Status__c</field>
        <literalValue>Needs Job Start</literalValue>
        <name>Set Job Status to Need Job Start</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Set_Job_Status_to_Waiting_for_Move_Out</fullName>
        <field>Job_Status__c</field>
        <literalValue>Waiting for Move Out</literalValue>
        <name>Set Job Status to Waiting for Move Out</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Job_Name</fullName>
        <field>Name</field>
        <formula>IF( LEN(IF(RecordType.Name == &apos;Turn&apos;, 
	IF( Property_Unit__c !=null, 
		&apos;Turn-&apos;+ Property_Unit__r.Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)) ,  
	IF( Property__c !=null,
		&apos;Turn-&apos;+  Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)), 
		
	&apos;Turn-&apos;+TEXT(DATEVALUE(CreatedDate))) ) ,  
	
IF(RecordType.Name == &apos;Renovation&apos;,  

	IF(Property_Unit__c !=null, 
		&apos;Renovation-&apos;+ Property_Unit__r.Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)),  
	IF(Property__c !=null, 
		&apos;Renovation-&apos;+  Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)), 	
	&apos;Renovation-&apos;+TEXT(DATEVALUE(CreatedDate))) ) , 
	
IF(RecordType.Name == &apos;Acceptance Walk&apos;,  

	IF(Property_Unit__c !=null, 
		&apos;Acceptance Walk-&apos;+ Property_Unit__r.Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)),  
	IF(Property__c !=null, 
		&apos;Acceptance Walk-&apos;+  Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)), 	
	&apos;Acceptance Walk-&apos;+TEXT(DATEVALUE(CreatedDate))) ) , 
	
	&apos;&apos;) ) )) &gt; 80, 
LEFT(IF(RecordType.Name == &apos;Turn&apos;, 
	IF( Property_Unit__c !=null, 
		&apos;Turn-&apos;+ Property_Unit__r.Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)) ,  
	IF( Property__c !=null,
		&apos;Turn-&apos;+  Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)), 
		
	&apos;Turn-&apos;+TEXT(DATEVALUE(CreatedDate))) ) ,  
	
IF(RecordType.Name == &apos;Renovation&apos;,  

	IF(Property_Unit__c !=null, 
		&apos;Renovation-&apos;+ Property_Unit__r.Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)),  
	IF(Property__c !=null, 
		&apos;Renovation-&apos;+  Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)), 	
	&apos;Renovation-&apos;+TEXT(DATEVALUE(CreatedDate))) ) , 
	
IF(RecordType.Name == &apos;Acceptance Walk&apos;,  

	IF(Property_Unit__c !=null, 
		&apos;Acceptance Walk-&apos;+ Property_Unit__r.Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)),  
	IF(Property__c !=null, 
		&apos;Acceptance Walk-&apos;+  Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)), 	
	&apos;Acceptance Walk-&apos;+TEXT(DATEVALUE(CreatedDate))) ) , 
	
	&apos;&apos;) ) ), 80), 
IF(RecordType.Name == &apos;Turn&apos;, 
	IF( Property_Unit__c !=null, 
		&apos;Turn-&apos;+ Property_Unit__r.Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)) ,  
	IF( Property__c !=null,
		&apos;Turn-&apos;+  Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)), 
		
	&apos;Turn-&apos;+TEXT(DATEVALUE(CreatedDate))) ) ,  
	
IF(RecordType.Name == &apos;Renovation&apos;,  

	IF(Property_Unit__c !=null, 
		&apos;Renovation-&apos;+ Property_Unit__r.Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)),  
	IF(Property__c !=null, 
		&apos;Renovation-&apos;+  Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)), 	
	&apos;Renovation-&apos;+TEXT(DATEVALUE(CreatedDate))) ) , 
	
IF(RecordType.Name == &apos;Acceptance Walk&apos;,  

	IF(Property_Unit__c !=null, 
		&apos;Acceptance Walk-&apos;+ Property_Unit__r.Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)),  
	IF(Property__c !=null, 
		&apos;Acceptance Walk-&apos;+  Property__r.Name+&apos;-&apos;+TEXT(DATEVALUE(CreatedDate)), 	
	&apos;Acceptance Walk-&apos;+TEXT(DATEVALUE(CreatedDate))) ) , 
	
	&apos;&apos;)) ))</formula>
        <name>Update Job Name</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_Job_Status_To_Upcoming</fullName>
        <field>Job_Status__c</field>
        <literalValue>Waiting for Move Out</literalValue>
        <name>Update Job Status To Upcoming</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
    </fieldUpdates>
    <rules>
        <fullName>Job - Update Status to completed</fullName>
        <actions>
            <name>Job_Update_Status_to_Complete</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Job__c.Completed__c</field>
            <operation>equals</operation>
            <value>True</value>
        </criteriaItems>
        <triggerType>onAllChanges</triggerType>
    </rules>
    <rules>
        <fullName>Set Actual Job End Date Based on Status</fullName>
        <actions>
            <name>Set_Actual_Job_End_Date</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <criteriaItems>
            <field>Job__c.Job_Status__c</field>
            <operation>equals</operation>
            <value>Job Completed</value>
        </criteriaItems>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>Set Job Name</fullName>
        <actions>
            <name>Update_Job_Name</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>true</formula>
        <triggerType>onCreateOnly</triggerType>
    </rules>
    <rules>
        <fullName>Set Job Status upon creation - Need Job Start</fullName>
        <actions>
            <name>Set_Job_Status_to_Need_Job_Start</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>AND ( ISPICKVAL( Property_Unit__r.Occupancy_Status__c, &quot;Vacant&quot;),  RecordType.Name  = &apos;Renovation&apos; )</formula>
        <triggerType>onCreateOnly</triggerType>
    </rules>
    <rules>
        <fullName>Set Job Status upon creation - Waiting for Move Out</fullName>
        <actions>
            <name>Set_Job_Status_to_Waiting_for_Move_Out</name>
            <type>FieldUpdate</type>
        </actions>
        <active>false</active>
        <formula>AND (      ISPICKVAL( Property_Unit__r.Occupancy_Status__c, &quot;Occupied&quot;)  )</formula>
        <triggerType>onCreateOnly</triggerType>
    </rules>
    <rules>
        <fullName>Update Job Status</fullName>
        <actions>
            <name>Update_Job_Status_To_Upcoming</name>
            <type>FieldUpdate</type>
        </actions>
        <active>false</active>
        <formula>AND(ISCHANGED(Move_Out_Date__c),ISPICKVAL(Job_Status__c, &quot;Work In Progress&quot;),Move_Out_Date__c &gt;  TODAY())</formula>
        <triggerType>onAllChanges</triggerType>
    </rules>
</Workflow>
